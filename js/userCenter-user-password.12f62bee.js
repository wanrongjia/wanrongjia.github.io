"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[6965,9336],{3516:function(e,s,o){o.r(s),o.d(s,{default:function(){return w}});var r=o(6252);const a=(0,r._)("div",{class:"el-form-item-msg"}," 必须提供当前登录用户密码才能进行更改 ",-1),l=(0,r._)("div",{class:"el-form-item-msg"}," 请输入包含英文、数字的8位以上密码 ",-1);function d(e,s,o,d,t,m){const u=(0,r.up)("el-alert"),p=(0,r.up)("el-input"),w=(0,r.up)("el-form-item"),n=(0,r.up)("sc-password-strength"),i=(0,r.up)("el-button"),f=(0,r.up)("el-form"),c=(0,r.up)("el-card");return(0,r.wg)(),(0,r.j4)(c,{shadow:"never",header:"修改密码"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{title:"密码更新成功后，您将被重定向到登录页面，您可以使用新密码重新登录。",type:"info","show-icon":"",style:{"margin-bottom":"15px"}}),(0,r.Wm)(f,{ref:"form",model:t.form,rules:t.rules,"label-width":"120px",style:{"margin-top":"20px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{label:"当前密码",prop:"oldPassword"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.form.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=e=>t.form.oldPassword=e),type:"password","show-password":"",placeholder:"请输入当前密码"},null,8,["modelValue"]),a])),_:1}),(0,r.Wm)(w,{label:"新密码",prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.form.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.form.password=e),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"]),(0,r.Wm)(n,{modelValue:t.form.password,"onUpdate:modelValue":s[2]||(s[2]=e=>t.form.password=e)},null,8,["modelValue"]),l])),_:1}),(0,r.Wm)(w,{label:"确认新密码",prop:"confirmNewPassword"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{modelValue:t.form.confirmNewPassword,"onUpdate:modelValue":s[3]||(s[3]=e=>t.form.confirmNewPassword=e),type:"password","show-password":"",placeholder:"请再次输入新密码"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(w,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:m.save},{default:(0,r.w5)((()=>[(0,r.Uk)("保存密码")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1})}var t=o(7764),m={components:{scPasswordStrength:t.Z},data(){return{form:{oldPassword:"",password:"",confirmNewPassword:""},rules:{oldPassword:[{required:!0,message:"请输入当前密码"}],password:[{required:!0,message:"请输入新密码"}],confirmNewPassword:[{required:!0,message:"请再次输入新密码"},{validator:(e,s,o)=>{s!==this.form.password?o(new Error("两次输入密码不一致")):o()}}]}}},methods:{save(){this.$refs.form.validate((async e=>{if(!e)return!1;{let e=await this.$API.user.EditPassword.put(this.form);200===e.code?this.$alert("密码修改成功，是否跳转至登录页使用新密码登录","修改成功",{type:"success",center:!0}).then((()=>{this.$router.replace({path:"/login"})})).catch((()=>{})):this.$message.warning(e.message)}}))}}},u=o(3744);const p=(0,u.Z)(m,[["render",d]]);var w=p}}]);