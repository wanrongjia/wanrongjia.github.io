"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[4058],{5093:function(e,l,a){a.r(l),a.d(l,{default:function(){return f}});var t=a(6252),s=a(3577);const r=(0,t._)("div",{class:"el-form-item-msg"},"请输入注册时填写的登录账号",-1),o={class:"yzm"},m={key:0},u=(0,t._)("div",{class:"el-form-item-msg"},"请输入包含英文、数字的8位以上密码",-1);function i(e,l,a,i,d,n){const p=(0,t.up)("el-step"),c=(0,t.up)("el-steps"),w=(0,t.up)("el-input"),f=(0,t.up)("el-form-item"),h=(0,t.up)("el-button"),v=(0,t.up)("el-form"),g=(0,t.up)("el-result"),k=(0,t.up)("common-page");return(0,t.wg)(),(0,t.j4)(k,{title:"重置密码"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{active:d.stepActive,simple:"","finish-status":"success"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{title:"填写新密码"}),(0,t.Wm)(p,{title:"完成重置"})])),_:1},8,["active"]),0==d.stepActive?((0,t.wg)(),(0,t.j4)(v,{key:0,ref:"form",model:d.form,rules:d.rules,"label-width":120},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{label:"登录账号",prop:"user"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:d.form.user,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.user=e),placeholder:"请输入登录账号"},null,8,["modelValue"]),r])),_:1}),(0,t.Wm)(f,{label:"手机号码",prop:"phone"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:d.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.phone=e),placeholder:"请输入手机号码"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,{label:"短信验证码",prop:"yzm"},{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(w,{modelValue:d.form.yzm,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.yzm=e),placeholder:"请输入6位短信验证码"},null,8,["modelValue"]),(0,t.Wm)(h,{onClick:n.getYzm,disabled:d.disabled},{default:(0,t.w5)((()=>[(0,t.Uk)("获取验证码"),d.disabled?((0,t.wg)(),(0,t.iD)("span",m," ("+(0,s.zw)(d.time)+")",1)):(0,t.kq)("",!0)])),_:1},8,["onClick","disabled"])])])),_:1}),(0,t.Wm)(f,{label:"新密码",prop:"newpw"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:d.form.newpw,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.newpw=e),"show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"]),u])),_:1}),(0,t.Wm)(f,{label:"确认新密码",prop:"newpw2"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:d.form.newpw2,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.newpw2=e),"show-password":"",placeholder:"请再一次输入新密码"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:n.save},{default:(0,t.w5)((()=>[(0,t.Uk)("提交")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])):(0,t.kq)("",!0),1==d.stepActive?((0,t.wg)(),(0,t.j4)(g,{key:1,icon:"success",title:"密码重置成功","sub-title":"请牢记自己的新密码,返回登录后使用新密码登录"},{extra:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:n.backLogin},{default:(0,t.w5)((()=>[(0,t.Uk)("返回登录")])),_:1},8,["onClick"])])),_:1})):(0,t.kq)("",!0)])),_:1})}a(7658);var d=a(6379),n=a(2787),p={components:{commonPage:d["default"]},data(){return{stepActive:0,form:{user:"",phone:"",yzm:"",newpw:"",newpw2:""},rules:{user:[{required:!0,message:"请输入登录账号"}],phone:[{required:!0,message:"请输入手机号"}],yzm:[{required:!0,message:"请输入短信验证码"}],newpw:[{required:!0,message:"请输入新的密码"},{validator:n.Gv,trggier:["blur","change"]}],newpw2:[{required:!0,message:"请再次输入新的密码"},{validator:(e,l,a)=>{l!==this.form.newpw?a(new Error("两次输入密码不一致")):a()}}]},disabled:!1,time:0}},mounted(){},methods:{async getYzm(){var e=await this.$refs.form.validateField("phone").catch((()=>{}));if(!e)return!1;this.$message.success("已发送短信至手机号码"),this.disabled=!0,this.time=60;var l=setInterval((()=>{this.time-=1,this.time<1&&(clearInterval(l),this.disabled=!1,this.time=0)}),1e3)},async save(){var e=await this.$refs.form.validate().catch((()=>{}));if(!e)return!1;this.stepActive=1},backLogin(){this.$router.push({path:"/login"})}}},c=a(3744);const w=(0,c.Z)(p,[["render",i]]);var f=w}}]);