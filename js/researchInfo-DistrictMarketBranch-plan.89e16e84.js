"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[9814],{683:function(e,a,t){t.r(a),t.d(a,{default:function(){return g}});var l=t(6252),i=t(3577);const r=e=>((0,l.dD)("data-v-0412a499"),e=e(),(0,l.Cn)(),e),s={class:"left-panel"},n={class:"query"},u={class:"query_item"},o=r((()=>(0,l._)("div",{class:"query_label"},"计划名称：",-1))),c={class:"right-panel"},d={class:"right-panel-search",style:{margin:"5px 0"}};function p(e,a,t,r,p,h){const m=(0,l.up)("el-input"),f=(0,l.up)("el-button"),w=(0,l.up)("el-header"),g=(0,l.up)("el-table-column"),b=(0,l.up)("el-col"),y=(0,l.up)("el-row"),_=(0,l.up)("el-button-group"),v=(0,l.up)("scTable"),k=(0,l.up)("el-main"),C=(0,l.up)("el-container"),W=(0,l.Q2)("role");return(0,l.wg)(),(0,l.j4)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"searchSpan"},{default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l._)("div",n,[(0,l._)("div",u,[o,(0,l.Wm)(m,{class:"query_input",placeholder:"请输入计划名称",modelValue:p.queryInfo.paramData.name,"onUpdate:modelValue":a[0]||(a[0]=e=>p.queryInfo.paramData.name=e),clearable:""},null,8,["modelValue"])])])]),(0,l._)("div",c,[(0,l._)("div",d,[(0,l.Wm)(f,{type:"default",onClick:a[1]||(a[1]=e=>h.upsearch(!0))},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1}),(0,l.Wm)(f,{type:"primary",onClick:a[2]||(a[2]=e=>h.upsearch(!1))},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1})])])])),_:1}),(0,l.Wm)(k,{class:"nopadding"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{ref:"table",data:p.tableData,staticTotal:p.total,"row-key":"id",hideRefresh:"",onSelectionChange:h.selectionChange,onPaginationChange:h.paginationChange,onPageSizeChange:h.pageSizeChange},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:"计划名称",prop:"name","min-width":"350"}),(0,l.Wm)(g,{label:"所属部门",prop:"deptType","min-width":"150",align:"center"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)(h.filterType(e.row.deptType,p.deptList)),1)])),_:1}),(0,l.Wm)(g,{label:"调研对象",prop:"researchObjectType","min-width":"150",align:"center"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)(h.filterType(e.row.researchObjectType,p.researchObjectList)),1)])),_:1}),(0,l.Wm)(g,{label:"周期",prop:"researchPeriodType","min-width":"150",align:"center"},{default:(0,l.w5)((e=>[(0,l.Uk)((0,i.zw)(h.filterType(e.row.researchPeriodType,p.researchPeriodList)),1)])),_:1}),(0,l.Wm)(g,{label:"状态",prop:"status","min-width":"130",align:"center"},{default:(0,l.w5)((e=>[(0,l._)("div",{style:(0,i.j5)(h.statusStyle(e.row.status))},(0,i.zw)(h.filterType(e.row.status,p.statusList)),5)])),_:1}),(0,l.Wm)(g,{label:"审核时间",prop:"","min-width":"220",align:"center"},{default:(0,l.w5)((e=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{span:11},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.row.appeal.accountManagerAppealStartTime),1)])),_:2},1024),(0,l.Wm)(b,{span:2},{default:(0,l.w5)((()=>[(0,l.Uk)("-")])),_:1}),(0,l.Wm)(b,{span:11},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.row.appeal.districtMarketingDeptAuditEndTime),1)])),_:2},1024)])),_:2},1024)])),_:1}),(0,l.Wm)(g,{label:"操作",fixed:"right",align:"right","min-width":"150"},{default:(0,l.w5)((e=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.j4)(f,{text:"",type:"primary",size:"small",onClick:a=>h.show_detail(e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("申诉处理")])),_:2},1032,["onClick"])),[[W,["7"]]])])),_:2},1024)])),_:1})])),_:1},8,["data","staticTotal","onSelectionChange","onPaginationChange","onPageSizeChange"])])),_:1})])),_:1})])),_:1})}t(7658);var h=t(9123),m={name:"plan",computed:{user:()=>h.Z.state.user.USER_INFO},data(){return{open:!1,tableData:[],total:0,selection:[],queryInfo:{current:1,paramData:{name:"",statusList:[4,5,6]},size:10},deptList:[{label:"营销",value:3}],researchObjectList:[{label:"店铺",value:2}],researchPeriodList:[{label:"月度",value:1},{label:"季度",value:2},{label:"半年",value:3},{label:"年度",value:4}],statusList:[{label:"待开始",value:1},{label:"调研进行中",value:2},{label:"待开启申诉",value:3},{label:"申诉已开启",value:4},{label:"结果待公布",value:5},{label:"结果公布",value:6}]}},mounted(){this.getDataList(!0)},methods:{filterType(e,a){return a.find((a=>a.value===e))?.label||"-"},statusStyle(e){let a="user-select: none;";switch(e){case 1:a+="color: #FF9F2E;";break;case 2:a+="color: #22CE29;";break;case 3:a+="color: #1D95F6;";break;case 4:a+="color: #23994A;text-decoration: underline;cursor: pointer;";break;case 5:a+="color: #FF7878;text-decoration: underline;cursor: pointer;";break;case 6:a+="color: #C8C8C8;";break}return a},async getDataList(){this.$refs.table.loading=!0;let e=await this.$API.researchInfo.ResearchCompany.GetPlanList.post(this.queryInfo);200===e.code?(this.tableData=e.data.list,this.total=e.data.total,this.$refs.table.loading=!1):this.$refs.table.loading=!1},add(){this.dialog.save=!0,this.$nextTick((()=>{this.$refs.saveDialog.open()}))},show_detail(e){this.$router.push({path:"/researchInfo/plan/detail",query:{id:e.id}})},selectionChange(e){this.selection=e},paginationChange(e){this.queryInfo.current=e,this.getDataList()},pageSizeChange(e){this.queryInfo.size=e,this.getDataList()},upsearch(e){e&&(this.queryInfo={current:1,paramData:{name:"",statusList:[4,5,6]},size:10}),this.queryInfo.current=1,this.$refs.table.currentPage=1,this.getDataList()},handleSaveSuccess(e,a){("add"==a||"edit"==a||"import"==a)&&this.getDataList()}}},f=t(3744);const w=(0,f.Z)(m,[["render",p],["__scopeId","data-v-0412a499"]]);var g=w}}]);