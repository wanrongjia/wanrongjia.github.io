"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1197],{8565:function(e,a,l){l.r(a),l.d(a,{default:function(){return g}});var t=l(6252),i=l(3577);const s=e=>((0,t.dD)("data-v-7ec78c8e"),e=e(),(0,t.Cn)(),e),d={class:"left-panel"},u={class:"title"},n=s((()=>(0,t._)("br",null,null,-1))),p={class:"right-panel"},c=s((()=>(0,t._)("div",{class:"label"},"已完成",-1))),o={class:"count"};function r(e,a,l,s,r,m){const f=(0,t.up)("el-icon-list"),w=(0,t.up)("el-icon"),h=(0,t.up)("el-tag"),k=(0,t.up)("el-button"),b=(0,t.up)("el-button-group"),_=(0,t.up)("el-header"),g=(0,t.up)("el-form-item"),W=(0,t.up)("el-col"),D=(0,t.up)("el-row"),v=(0,t.up)("AppealDetail"),C=(0,t.up)("el-tab-pane"),x=(0,t.up)("AllData"),y=(0,t.up)("el-tabs"),A=(0,t.up)("el-main"),z=(0,t.up)("el-container"),U=(0,t.up)("appealDialog"),S=(0,t.Q2)("role");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"info"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(w,{size:20,color:"var(--el-color-primary)"},{default:(0,t.w5)((()=>[(0,t.Wm)(f)])),_:1}),(0,t._)("div",u,(0,i.zw)(r.detail.name),1),(0,t.Wm)(h,{effect:"dark",style:{color:"#fff !important",border:"none"},color:m.statusStyle(r.detail.status)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(m.filterType(r.detail.status,r.statusList)),1)])),_:1},8,["color"]),n]),(0,t._)("div",p,[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{size:"default",onClick:m.back},{default:(0,t.w5)((()=>[(0,t.Uk)("返回")])),_:1},8,["onClick"]),(0,t.Wm)(k,{size:"default",onClick:m.exportData},{default:(0,t.w5)((()=>[(0,t.Uk)("信息导出")])),_:1},8,["onClick"])])),_:1}),(0,t.wy)(((0,t.wg)(),(0,t.j4)(k,{type:"primary",size:"default",onClick:m.editData},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑")])),_:1},8,["onClick"])),[[S,["1","2"]]])])])),_:1}),(0,t.Wm)(A,{style:{background:"#fff"}},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{style:{"margin-left":"40px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{span:18},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{xs:24,sm:24,md:10,lg:10,xl:10},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"客户经理申诉时间:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.accountManagerAppealStartTime||"-")+" ~ "+(0,i.zw)(r.detail.appeal.accountManagerAppealEndTime||"-"),1)])),_:1})])),_:1}),(0,t.Wm)(W,{xs:24,sm:24,md:7,lg:7,xl:7},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"区市场部审核截止时间:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.districtMarketDeptAuditEndTime||"-"),1)])),_:1})])),_:1}),(0,t.Wm)(W,{xs:24,sm:24,md:7,lg:7,xl:7},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"区营销部审核截止时间:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.districtMarketingDeptAuditEndTime||"-"),1)])),_:1})])),_:1}),(0,t.Wm)(W,{xs:24,sm:24,md:10,lg:10,xl:10},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"免申诉分数:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.appealFreeScore||"-"),1)])),_:1})])),_:1}),(0,t.Wm)(W,{xs:24,sm:24,md:7,lg:7,xl:7},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"最新修改人:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.updateUserAccount||"-"),1)])),_:1})])),_:1}),(0,t.Wm)(W,{xs:24,sm:24,md:7,lg:7,xl:7},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"最新修改时间:"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(r.detail.appeal.updateTime||"-"),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.Wm)(W,{span:6,class:"successBox"},{default:(0,t.w5)((()=>[c,(0,t._)("div",o,(0,i.zw)(r.detail.completeCount),1)])),_:1})])),_:1}),(0,t.Wm)(y,{modelValue:r.activeName,"onUpdate:modelValue":a[0]||(a[0]=e=>r.activeName=e),class:"demo-tabs",onTabClick:m.handleClick},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{label:"申诉情况",name:"AppealDetail"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{ref:"AppealDetail"},null,512)])),_:1}),(0,t.Wm)(C,{label:"完整数据",name:"AllData"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{ref:"AllData"},null,512)])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1})])),_:1}),r.dialog.appeal?((0,t.wg)(),(0,t.j4)(U,{key:0,ref:"appealDialog",onSuccess:m.handleSaveSuccess,onClosed:a[1]||(a[1]=e=>r.dialog.appeal=!1)},null,8,["onSuccess"])):(0,t.kq)("",!0)],64)}l(7658);var m=l(2493),f=l(9889),w=l(3953),h=l(8201),k={name:"plan-detail",components:{appealDialog:m["default"],AppealDetail:f["default"],AllData:w["default"]},data(){return{activeName:"AppealDetail",id:this.$route.query.id,input:"",dialog:{appeal:!1},detail:{appeal:{}},statusList:[{label:"待开始",value:1},{label:"调研进行中",value:2},{label:"待开启申诉",value:3},{label:"申诉已开启",value:4},{label:"结果待公布",value:5},{label:"结果公布",value:6}]}},created(){},mounted(){this.getDetail(this.$route.query.id)},methods:{filterType(e,a){return a.find((a=>a.value===e))?.label||"-"},statusStyle(e){let a="";switch(e){case 1:a="#FF9F2E";break;case 2:a="#22CE29";break;case 3:a="#1D95F6";break;case 4:a="#23994A";break;case 5:a="#FF7878";break;case 6:a="#C8C8C8";break}return a},async getDetail(e){let a=await this.$API.researchInfo.ResearchCompany.GetPlanDetail.get(e);200===a.code?(this.detail=a.data||{},this.$nextTick((()=>{this.handleClick({props:{name:this.activeName}})}))):h.Z.closeNext((()=>{this.$router.push("/researchInfo/plan")}))},back(){h.Z.closeNext((()=>{this.$router.push("/researchInfo/plan")}))},editData(){this.dialog.appeal=!0,this.$nextTick((()=>{this.$refs.appealDialog.open("edit").setData(this.id,this.detail.appeal)}))},handleClick(e){this.$refs[e.props.name]?.initData()},handleSaveSuccess(e,a){"edit"==a&&this.getDetail(this.id)},async exportData(){let e=await this.$API.researchInfo.ResearchCompany.DownloadBusinessSheet.get(this.id);const a=document.createElement("a");let l=new Blob([e],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(l),a.setAttribute("download",`${this.detail.name}评分记录.xlsx`),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},b=l(3744);const _=(0,b.Z)(k,[["render",r],["__scopeId","data-v-7ec78c8e"]]);var g=_}}]);