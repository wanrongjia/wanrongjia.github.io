"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[1967],{308:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var l=t(6252),s=t(3577);const i=e=>((0,l.dD)("data-v-4d879ed6"),e=e(),(0,l.Cn)(),e),n={class:"left-panel"},u={class:"title"},c=i((()=>(0,l._)("br",null,null,-1))),d={class:"right-panel"},o={class:"storng"},r=i((()=>(0,l._)("div",{class:"label"},"总数",-1))),p={class:"count"};function m(e,a,t,i,m,f){const h=(0,l.up)("el-icon-list"),b=(0,l.up)("el-icon"),w=(0,l.up)("el-tag"),k=(0,l.up)("el-button"),v=(0,l.up)("el-button-group"),_=(0,l.up)("el-header"),C=(0,l.up)("el-col"),D=(0,l.up)("el-row"),y=(0,l.up)("AppealDetail"),W=(0,l.up)("el-tab-pane"),A=(0,l.up)("AllData"),g=(0,l.up)("el-tabs"),$=(0,l.up)("el-main"),x=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(x,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"info"},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(b,{size:20,color:"var(--el-color-primary)"},{default:(0,l.w5)((()=>[(0,l.Wm)(h)])),_:1}),(0,l._)("div",u,(0,s.zw)(m.detail.name),1),(0,l.Wm)(w,{effect:"dark",style:{color:"#fff !important",border:"none"},color:f.statusStyle(m.detail.status)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(f.filterType(m.detail.status,m.statusList)),1)])),_:1},8,["color"]),c]),(0,l._)("div",d,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{size:"default",onClick:f.exportData},{default:(0,l.w5)((()=>[(0,l.Uk)("数据导出")])),_:1},8,["onClick"]),(0,l.Wm)(k,{size:"default",onClick:f.back},{default:(0,l.w5)((()=>[(0,l.Uk)("返回")])),_:1},8,["onClick"])])),_:1})])])),_:1}),(0,l.Wm)($,{style:{background:"#fff"}},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{style:{"margin-left":"40px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{span:16},{default:(0,l.w5)((()=>[(0,l._)("div",o,"区营销部申诉时间："+(0,s.zw)(m.detail.appeal.accountManagerAppealStartTime)+" ~ "+(0,s.zw)(m.detail.appeal.districtMarketingDeptAuditEndTime),1)])),_:1}),(0,l.Wm)(C,{span:8,class:"successBox"},{default:(0,l.w5)((()=>[r,(0,l._)("div",p,(0,s.zw)(m.detail.completeCount),1)])),_:1})])),_:1}),(0,l.Wm)(g,{modelValue:m.activeName,"onUpdate:modelValue":a[0]||(a[0]=e=>m.activeName=e),class:"demo-tabs",onTabClick:f.handleClick},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{label:"申诉情况",name:"AppealDetail"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{ref:"AppealDetail"},null,512)])),_:1}),(0,l.Wm)(W,{label:"完整数据",name:"AllData"},{default:(0,l.w5)((()=>[(0,l.Wm)(A,{ref:"AllData"},null,512)])),_:1})])),_:1},8,["modelValue","onTabClick"])])),_:1})])),_:1})}t(7658);var f=t(8364),h=t(2755),b=t(8201),w={name:"plan-detail",components:{AppealDetail:f["default"],AllData:h["default"]},data(){return{activeName:"AppealDetail",id:this.$route.query.id,input:"",detail:{appeal:{}},statusList:[{label:"待开始",value:1},{label:"调研进行中",value:2},{label:"待开启申诉",value:3},{label:"申诉已开启",value:4},{label:"结果待公布",value:5},{label:"结果公布",value:6}]}},created(){},mounted(){this.$store.commit("updateViewTagsTitle",`打分计划详情 ID:${this.id}`),this.getDetail(this.$route.query.id)},methods:{filterType(e,a){return a.find((a=>a.value===e))?.label||"-"},statusStyle(e){let a="";switch(e){case 1:a="#FF9F2E";break;case 2:a="#22CE29";break;case 3:a="#1D95F6";break;case 4:a="#23994A";break;case 5:a="#FF7878";break;case 6:a="#C8C8C8";break}return a},async getDetail(e){let a=await this.$API.researchInfo.ResearchCompany.GetPlanDetail.get(e);200===a.code?(this.detail=a.data||{},this.$nextTick((()=>{this.handleClick({props:{name:this.activeName}})}))):b.Z.closeNext((()=>{this.$router.push("/researchInfo/plan")}))},back(){b.Z.closeNext((()=>{this.$router.push("/researchInfo/plan")}))},handleClick(e){this.$refs[e.props.name]?.initData()},async exportData(){let e=await this.$API.researchInfo.ResearchCompany.DownloadBusinessSheet.get(this.id);const a=document.createElement("a");let t=new Blob([e],{type:"application/vnd.ms-excel"});a.style.display="none",a.href=URL.createObjectURL(t),a.setAttribute("download",`${this.detail.name}评分记录.xlsx`),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}},k=t(3744);const v=(0,k.Z)(w,[["render",m],["__scopeId","data-v-4d879ed6"]]);var _=v}}]);